---
const base = import.meta.env.BASE_URL;

const activities = [
  { title: 'Piano', href: `${base}learn/piano/`, icon: 'ğŸ¹' },
  { title: 'Guitar', href: `${base}learn/guitar/`, icon: 'ğŸ¸' },
  { title: 'Samples', href: `${base}learn/sample-explorer/`, icon: 'ğŸ”Š' },
  { title: 'Sample Quiz', href: `${base}learn/sample-guessing/`, icon: 'ğŸ¯' },
  { title: 'Waveform Quiz', href: `${base}learn/waveform-guessing/`, icon: 'ã€°' },
  { title: 'Effect Quiz', href: `${base}learn/effect-guessing/`, icon: 'ğŸ›' },
  { title: 'Ear Training', href: `${base}learn/ear-training/`, icon: 'ğŸ‘‚' },
  { title: 'Rhythms', href: `${base}learn/euclidean-101/`, icon: 'ğŸ¥' },
  { title: 'Metal', href: `${base}learn/metal/`, icon: 'ğŸ¤˜' },
  { title: 'EDM', href: `${base}learn/edm/`, icon: 'ğŸ§' },
];

const currentPath = Astro.url.pathname;
---

<nav class="flex flex-col gap-1 h-full">
  <a
    href={base}
    class="flex items-center gap-2 px-3 py-2 text-sm text-gray-400 hover:text-white hover:bg-gray-800 rounded-lg transition-colors mb-2"
  >
    <span>â†</span>
    <span>JamDojo</span>
  </a>

  {activities.map((activity) => {
    const isActive = currentPath.includes(activity.href.replace(base, '/'));
    return (
      <a
        href={activity.href}
        class:list={[
          'flex items-center gap-3 px-3 py-2 rounded-lg transition-colors text-sm',
          isActive
            ? 'bg-cyan-600 text-white'
            : 'text-gray-300 hover:bg-gray-800 hover:text-white'
        ]}
      >
        <span class="text-lg">{activity.icon}</span>
        <span>{activity.title}</span>
      </a>
    );
  })}

  <div class="mt-auto pt-4 border-t border-gray-800 text-xs text-gray-500 space-y-1">
    <a href="https://github.com/kimjune01/jamdojo" target="_blank" rel="noopener" class="block hover:text-cyan-400">JamDojo Source</a>
    <a href="https://github.com/tidalcycles/strudel" target="_blank" rel="noopener" class="block hover:text-cyan-400">Strudel (AGPL-3.0)</a>
  </div>
</nav>
